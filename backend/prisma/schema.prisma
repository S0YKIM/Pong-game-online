// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["linux-arm64-openssl-1.1.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model member {
	name			String		@id @db.VarChar(20) @unique
	email			String		@db.VarChar(50)
	intraId			String		@db.VarChar(20) @unique
	avatar			String
	status			Int			@default(1)
	win				Int			@default(0)
	lose			Int			@default(0)
	level			Int			@default(0)
	score			Int			@default(1000)
	achieve			Int			@default(0)
	socket			Int			@default(-1)
	friend			member[]	@relation("friend")
	blackList		member[]	@relation("friend")
	game			game[]
	twoFactor		Boolean		@default(false)
	tfaCode			String?		@db.VarChar(512)
	tfaTime			DateTime?
}

model game {
	id			Int			@id @default(autoincrement())
	opponent	String
	scoreA		Int
	scoreB		Int
	result		Boolean		@default(false)
	type		Int
	date		DateTime	@default(now())
	memberName	member		@relation(fields: [name], references: [name])
	name		String
}
